/* =========================================================
   Weather Dashboard · app.component.css  (versión simplificada)
   Mantiene el diseño, quita paréntesis en tendencias y evita blur
   ========================================================= */

/* =============== Layout base =============== */
.container {
  max-width: 1120px;
  margin: 20px auto;
  padding: 0 16px 32px;
}

/* =============== Header =============== */
.header {
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
  padding: 14px 20px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  transition: border-color .2s ease, background-color .2s ease;
}
.header:hover { border-color: var(--border-hover); }

.brand { display: flex; align-items: center; gap: 12px; }
.brand__logo { width: 28px; height: 28px; display: grid; place-items: center; border-radius: 8px; color: var(--accent); }
.brand__text h1 { margin: 0; font-size: var(--fs-xl); font-weight: 800; letter-spacing: -0.01em; line-height: var(--lh-tight); }
.brand__text p { margin: 0; font-size: var(--fs-xs); color: var(--text-2); letter-spacing: .03em; }

.header-actions { display: flex; align-items: center; gap: 32px; }
@media (max-width: 768px) { .header-actions { gap: 16px; } }

/* =============== Theme switch =============== */
.theme-switch__input { position: absolute; opacity: 0; pointer-events: none; }
.theme-switch__label { display: inline-flex; align-items: center; gap: .75rem; cursor: pointer; user-select: none; line-height: 1; }
.theme-switch__icon { opacity: .75; transition: opacity .2s ease; line-height: 1; }
.theme-switch__label:hover .theme-switch__icon { opacity: .95; }

.theme-switch__track {
  position: relative; display: inline-block; vertical-align: middle; line-height: 0;
  width: 52px; height: 28px; border-radius: 999px;
  background: linear-gradient(90deg, #e5e7eb 0 50%, #1f2937 50% 100%);
  background-size: 200% 100%; background-position: left center;
  border: 1.5px solid #cbd5e1; box-shadow: inset 0 0 0 1px rgba(0,0,0,.02);
  transition: background-position .25s ease, border-color .25s ease, box-shadow .25s ease;
}
body.theme-dark .theme-switch__track { border-color: #0f172a; background: #374151; }
.theme-switch__track::after {
  content: ""; position: absolute; top: 5px; bottom: 5px; left: 6px; right: 26px;
  border-radius: 999px; background: rgba(0,0,0,.06); transition: left .25s ease, right .25s ease, background .25s ease;
}
.theme-switch__thumb {
  position: absolute; left: 3px; top: 50%; transform: translate(0, -50%);
  width: 22px; height: 22px; border-radius: 50%; background: #ffffff; border: 1.5px solid #d1d5db;
  box-shadow: 0 2px 4px rgba(0,0,0,.18); transition: transform .25s ease, background .25s ease, border-color .25s ease, box-shadow .25s ease;
}
body.theme-dark .theme-switch__thumb { background: #e5e7eb; border-color: #111827; }
.theme-switch__input:checked + .theme-switch__label .theme-switch__track { background-position: right center; }
.theme-switch__input:checked + .theme-switch__label .theme-switch__track::after { left: 26px; right: 6px; background: rgba(255,255,255,.1); }
.theme-switch__input:checked + .theme-switch__label .theme-switch__thumb { transform: translate(24px, -50%); }
.theme-switch__label:hover .theme-switch__track { box-shadow: 0 0 0 3px var(--accent-subtle); }

/* =============== Toolbar & toggles =============== */
.toolbar { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 12px 14px; }
.series-group { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.series-group .label { color: var(--text-2); font-size: var(--fs-sm); }

.toggle {
  display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px;
  background: transparent; border: 1px solid var(--border); border-radius: 10px; color: var(--text-2);
  transition: background-color .15s ease, border-color .15s ease, transform .06s ease;
}
.toggle:hover { border-color: var(--border-hover); }
.toggle:active { transform: translateY(1px); }
.toggle input { accent-color: var(--accent); }

/* =============== Estado (pill) =============== */
.status {
  display: inline-flex; align-items: center; gap: 8px; padding: 6px 12px;
  border: 1px solid var(--border); border-radius: 999px; background: transparent; color: var(--text-2);
  font-size: 13px; white-space: nowrap;
}
.status .status-indicator { width: 8px; height: 8px; border-radius: 50%; background: #9ca3af; position: relative; }
.status.active .status-indicator { background: #10b981; }
.status.active .status-indicator::after {
  content: ""; position: absolute; inset: 0; border-radius: 50%;
  animation: pulse-ring 1.8s ease-out infinite; border: 2px solid rgba(16,185,129,0.35);
}
@keyframes pulse-ring { 0% { transform: scale(1); opacity: .6; } 70%,100% { transform: scale(1.8); opacity: 0; } }
@media (max-width: 480px) { .status span:not(.status-indicator) { display: none; } }

/* =============== Secciones / títulos =============== */
.section-title { font-size: var(--fs-sm); font-weight: 600; letter-spacing: .06em; text-transform: uppercase; color: var(--text-2); margin: 0 0 8px; }

/* =============== Grids locales =============== */
.cards { display: grid; gap: 12px; grid-template-columns: repeat(2, minmax(0,1fr)); }
@media (max-width: 820px) { .cards { grid-template-columns: 1fr; } }

/* =============== Cards genéricas =============== */
.card-surface {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.03);
  padding: 16px;
}
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  transition: transform 220ms ease, box-shadow 220ms ease, background 220ms ease, border-color .2s ease;
  will-change: transform, box-shadow;
}
.card:hover,
.card:focus-within {
  /* anti-blur: NO scale */
  transform: translateY(-2px);
  box-shadow: 0 8px 28px rgba(2, 6, 23, 0.10);
}
.theme-dark .card:hover,
.theme-dark .card:focus-within {
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
}

/* =============== KPIs =============== */
.kpis-header { display: flex; justify-content: space-between; align-items: baseline; padding: 12px 12px 0 12px; }
.microcopy { display: inline-flex; align-items: center; gap: 8px; }
.dot { width: 6px; height: 6px; border-radius: 50%; background: #9ca3af; display: inline-block; }
.dot.on { background: #10b981; }

.card.kpi { display: flex; flex-direction: column; justify-content: space-between; padding: 16px; }
.kpi-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.kpi-title { display: flex; align-items: center; gap: 6px; font-weight: 600; font-size: var(--fs-sm); color: var(--text-2); }
.kpi-value { font-size: var(--fs-kpi); font-weight: 700; line-height: var(--lh-tight); color: var(--text); }
.kpi-value .unit { font-size: var(--fs-sm); font-weight: 500; color: var(--text-2); margin-left: 4px; }
.muted { font-size: var(--fs-sm); color: var(--text-2); }

/* Tendencia: texto + icono a la derecha (sin paréntesis) */
.kpi-trend {
  display: inline-flex;
  align-items: center;
  gap: 6px;              /* espacio entre el texto y la flecha */
  font-size: 0.85rem;
  font-weight: 500;
  line-height: 1.2;
}
.kpi-trend.up   { color: #16a34a; }
.kpi-trend.down { color: #ef4444; }

/* Oculta cualquier paréntesis del HTML si existiera */
.kpi-trend__paren { display: none !important; }

/* Icono alineado a la línea base del texto */
.kpi-trend__icon {
  width: 16px;
  height: 16px;
  vertical-align: -2px;
  display: inline-block;
}

/* Sparklines (mini-gráficas) */
.sparkline {
  width: 100%;
  height: 22px;
  display: block;
  margin-top: 4px;
  transition: height 180ms ease, opacity 180ms ease, filter 180ms ease;
  opacity: 0.7;
}
.kpi:hover .sparkline,
.kpi:focus-within .sparkline {
  height: 34px;           /* más alto, sin escalar contenedor */
  opacity: 0.95;
  filter: contrast(105%);
}

/* KPIs: micro realce de valor en hover */
.kpi:hover .kpi-value, .kpi:focus-within .kpi-value { text-shadow: 0 0 1px rgba(15, 23, 42, 0.08); }

/* =============== Charts =============== */
.charts { display: grid; gap: 12px; grid-template-columns: repeat(2, minmax(0, 1fr)); }
@media (max-width: 1024px) { .charts { grid-template-columns: 1fr; } }

.chart-container {
  padding: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  transition: border-color .2s ease, background-color .2s ease;
  box-shadow: 0 0 0 1px rgba(0,0,0,0.03), 0 1px 2px rgba(0,0,0,0.04);
}
.chart-container:hover { border-color: var(--border-hover); }
.chart-container .section-title { margin-bottom: 8px; }
.chart-container canvas {
  width: 100% !important;
  height: 260px !important;
  display: block;
  border-radius: 10px;
  background: transparent;
  border: 1px solid var(--border);
}

/* =============== Estadísticas =============== */
.statistics { padding: 8px 12px 12px; margin-top: 12px; transition: border-color .2s ease, background-color .2s ease; box-shadow: 0 0 0 1px rgba(0,0,0,0.03), 0 1px 2px rgba(0,0,0,0.04); }
.stats-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 12px 0 12px; }
.stats-grid { display: grid; gap: 10px; grid-template-columns: repeat(3, minmax(0,1fr)); }
@media (max-width: 820px) { .stats-grid { grid-template-columns: 1fr; } }

.stat {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: baseline;
  gap: 12px;
  padding: 10px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  transition: border-color .2s ease, background-color .2s ease;
}
.stat:hover { border-color: var(--border-hover); }
.stat-label { font-size: var(--fs-xs); color: var(--text-2); letter-spacing: .02em; white-space: nowrap; display: inline-flex; align-items: center; gap: 8px; }
.stat-value { font-size: 18px; font-weight: 800; letter-spacing: -0.01em; font-variant-numeric: tabular-nums; justify-self: end; }

/* Barra de progreso (stat especial) */
.stat.stat--with-progress { row-gap: 8px; }
.progress {
  grid-column: 1 / -1;
  height: 6px;
  border-radius: 999px;
  background: rgba(2, 6, 23, 0.06);
  overflow: hidden;
  border: 0;
  box-shadow: none;
}
body.theme-dark .progress { background: rgba(255, 255, 255, 0.06); }
.progress__bar {
  height: 100%;
  border: 0;
  box-shadow: none;
  transition: width 0.35s ease;
  background: linear-gradient(90deg, var(--accent), color-mix(in oklab, var(--accent) 70%, #22d3ee));
}

/* Deltas (flecha de cambio en stats) */
.delta { color: inherit; }
.delta iconify-icon { transition: color .3s ease; vertical-align: -2px; }
.delta.up   iconify-icon { color: #16a34a; }
.delta.down iconify-icon { color: #dc2626; }

/* =============== Hovercards (resumen mini) =============== */
.card.kpi { position: relative; overflow: visible; }
.kpi-hovercard {
  position: absolute;
  left: 50%;
  bottom: calc(100% + 6px);
  min-width: 180px;
  max-width: 220px;
  border-radius: 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  box-shadow: 0 8px 24px rgba(2, 6, 23, 0.12);
  padding: 8px 10px;
  opacity: 0;
  transform: translateX(-50%) translateY(4px);
  pointer-events: none;
  transition: opacity .14s ease, transform .14s ease;
  z-index: 30;
  font-family: inherit;
}
.card.kpi:hover .kpi-hovercard,
.card.kpi:focus-within .kpi-hovercard {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
  pointer-events: auto;
}
.kpi-hovercard::after {
  content: "";
  position: absolute;
  left: 50%; top: 100%;
  border-width: 6px; border-style: solid;
  border-color: var(--border) transparent transparent transparent;
  transform: translateX(-50%);
}
.kpi-hovercard::before {
  content: "";
  position: absolute;
  left: 50%; top: calc(100% - 1px);
  border-width: 6px; border-style: solid;
  border-color: var(--surface) transparent transparent transparent;
  transform: translateX(-50%);
}
.hovercard-head { display: flex; justify-content: space-between; align-items: center; font-size: 12px; font-weight: 500; margin-bottom: 6px; color: var(--text-1); }
.pill-count { padding: 1px 6px; font-size: 10px; border-radius: 999px; border: 1px solid var(--border); color: var(--text-2); background: color-mix(in oklab, var(--accent) 6%, transparent); }
.hovercard-body { display: flex; flex-direction: column; gap: 4px; }
.hover-row { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 6px; }
.hover-label { font-size: 11px; font-weight: 400; color: var(--text-2); letter-spacing: .01em; }
.hover-value { font-weight: 600; font-size: 14px; letter-spacing: -0.01em; font-variant-numeric: tabular-nums; }
.hover-unit { margin-left: 2px; font-weight: 500; font-size: 11px; color: var(--text-2); }
.delta-pill-mini {
  display: inline-flex; align-items: center; gap: 4px; padding: 1px 6px;
  border-radius: 999px; border: 1px solid var(--border);
  background: color-mix(in oklab, var(--accent) 6%, transparent);
  font-weight: 500; font-size: 12px; line-height: 1;
}
.delta-pill-mini.up iconify-icon { color: #16a34a; }
.delta-pill-mini.down iconify-icon { color: #dc2626; }

/* =============== Footer =============== */
.footer { margin-top: 24px; padding: 16px; background: var(--surface); border-top: 1px solid var(--border); }
.footer-content { max-width: 1120px; margin: 0 auto; text-align: center; color: var(--text-2); }
.footer .tech-info { margin-top: 4px; }

/* =============== Accesibilidad (foco visible) =============== */
.toggle:focus-visible,
.theme-switch__label:focus-visible,
.card-surface:focus-within,
.card.kpi:focus-within,
.stat:focus-within,
.header:focus-within {
  outline: 2px solid color-mix(in oklab, var(--accent) 55%, transparent);
  outline-offset: 2px;
  border-color: color-mix(in oklab, var(--accent) 35%, var(--border));
}

/* =============== Animaciones de entrada =============== */
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.header         { animation: fadeInUp 0.6s ease-out 0s   backwards; }
.toolbar        { animation: fadeInUp 0.6s ease-out 0.1s backwards; }
.current-values { animation: fadeInUp 0.6s ease-out 0.2s backwards; }
.charts .chart-container:nth-child(1) { animation: fadeInUp 0.6s ease-out 0.5s backwards; }
.charts .chart-container:nth-child(2) { animation: fadeInUp 0.6s ease-out 0.6s backwards; }
.statistics     { animation: fadeInUp 0.6s ease-out 0.7s backwards; }
.footer         { animation: fadeInUp 0.6s ease-out 0.8s backwards; }

/* =============== Reduced motion =============== */
@media (prefers-reduced-motion: reduce) {
  *, .kpi-hovercard { animation: none !important; transition: none !important; }
}

/* =============== Microinteracciones =============== */
.kpi .kpi-title iconify-icon,
.stat .stat-label iconify-icon {
  transition: transform 160ms ease, filter 160ms ease, opacity 160ms ease;
}
.card:hover .kpi-title iconify-icon,
.card:focus-within .kpi-title iconify-icon,
.stat:hover .stat-label iconify-icon,
.stat:focus-within .stat-label iconify-icon {
  transform: translateY(-1px) rotate(-3deg);
  filter: brightness(1.06);
  opacity: 0.95;
}
